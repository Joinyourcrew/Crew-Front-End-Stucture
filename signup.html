<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Signup - Crew Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="shared-styles.css">
</head>
<body>
  <header>
    <div class="logo-container">
      <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
        <path d="M20 80 L40 20 L60 80 M40 20 L80 40" stroke-width="8" stroke="#f5f5f5" fill="none" stroke-linecap="round"/>
      </svg>
      <h1>CREW</h1>
    </div>
    <nav>
      <a href="/index.html">Home</a>
      <a href="/top-projects.html">Top Projects</a>
      <a href="/join.html">Join</a>
      <a href="/dream.html">Dream</a>
      <a href="/revive.html">Revive</a>
      <a href="/signup.html" class="active">Sign Up</a>
    </nav>
  </header>

  <main class="main-content">
    <div class="signup-container">
      <div class="signup-info">
        <h1 class="page-title">Join CREW</h1>
        <p class="page-subtitle">
          Join the Web3 creator economy. Build, collaborate, and launch crypto projects on Solana.
        </p>
        
        <ul class="features-list">
          <li>Access to Web3 project opportunities</li>
          <li>Connect with crypto builders worldwide</li>
          <li>Token-based rewards and equity sharing</li>
          <li>Built-in DAO governance tools</li>
          <li>Portfolio showcase on Solana</li>
        </ul>

        <div class="social-signup">
          <h3>Quick Sign Up</h3>
          <div class="social-buttons">
            <button class="social-btn" onclick="signUpWith('phantom')">
              <img src="https://phantom.app/img/phantom-icon-purple.png" alt="Phantom" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2220%22 height=%2220%22 viewBox=%220 0 24 24%22 fill=%22%23AB9FF2%22><circle cx=%2212%22 cy=%2212%22 r=%2210%22/></svg>'">
              Continue with Phantom
            </button>
            <button class="social-btn" onclick="signUpWith('x')">
              <img src="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.6.0/svgs/brands/x-twitter.svg" alt="X">
              Continue with X
            </button>
          </div>
        </div>
      </div>

      <div class="form-container">
        <h2 class="form-title">Create Your Account</h2>
        
        <form id="signupForm">
          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="firstName">First Name *</label>
              <input type="text" id="firstName" class="form-input" placeholder="Enter first name" required>
            </div>
            <div class="form-group">
              <label class="form-label" for="lastName">Last Name *</label>
              <input type="text" id="lastName" class="form-input" placeholder="Enter last name" required>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label" for="email">Email Address *</label>
            <input type="email" id="email" class="form-input" placeholder="Enter your email" required>
          </div>

          <div class="form-group">
            <label class="form-label" for="username">Username *</label>
            <input type="text" id="username" class="form-input" placeholder="Choose a unique username" required>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="password">Password *</label>
              <input type="password" id="password" class="form-input" placeholder="Create password" required>
            </div>
            <div class="form-group">
              <label class="form-label" for="confirmPassword">Confirm Password *</label>
              <input type="password" id="confirmPassword" class="form-input" placeholder="Confirm password" required>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label" for="role">Primary Role *</label>
            <select id="role" class="form-select" required>
              <option value="">Select your primary role</option>
              <option value="developer">Blockchain Developer</option>
              <option value="designer">UI/UX Designer</option>
              <option value="trader">DeFi Trader</option>
              <option value="creator">NFT Creator</option>
              <option value="entrepreneur">Crypto Entrepreneur</option>
              <option value="community">Community Manager</option>
              <option value="investor">Investor</option>
              <option value="other">Other</option>
            </select>
          </div>

          <div class="skills-section">
            <label class="form-label">Skills & Expertise</label>
            <div class="skills-input-container">
              <input type="text" id="skillInput" class="form-input skills-input" placeholder="e.g., Rust, Solana SDK, DeFi, NFTs">
              <button type="button" class="add-skill-btn" onclick="addSkill()">Add</button>
            </div>
            <div class="skills-list" id="skillsList"></div>
          </div>

          <div class="form-group">
            <label class="form-label" for="interests">Project Interests</label>
            <select id="interests" class="form-select">
              <option value="">What interests you most?</option>
              <option value="defi">DeFi & Trading</option>
              <option value="nft">NFTs & Digital Art</option>
              <option value="gaming">Gaming & Metaverse</option>
              <option value="dao">DAOs & Governance</option>
              <option value="infrastructure">Infrastructure & Tools</option>
              <option value="all">All Web3 Projects</option>
            </select>
          </div>

          <div class="checkbox-group">
            <input type="checkbox" id="terms" name="terms" required>
            <label for="terms">I agree to the <a href="/terms" target="_blank">Terms of Service</a> and <a href="/privacy" target="_blank">Privacy Policy</a> *</label>
          </div>

          <button type="submit" class="submit-btn" id="submitBtn">Create Account</button>
        </form>

        <div class="login-link">
          Already have an account? <a href="/login.html">Sign In</a>
        </div>
      </div>
    </div>
  </main>

  <footer>
    <div class="social-links">
      <a href="https://x.com">
        <img src="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.6.0/svgs/brands/x-twitter.svg" alt="X">
      </a>
      <a href="https://github.com">
        <img src="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.6.0/svgs/brands/github.svg" alt="GitHub">
      </a>
    </div>
    <p>© 2025 Crew Platform.</p>
  </footer>

  <div class="chat-box" onclick="alert('Messages feature coming soon!')">
    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#fff">
      <path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14h-4.7L12 19.3 8.7 16H4V4h16v12z"/>
    </svg>
    <span class="notification-badge" id="notification-count">0</span>
  </div>

  <script>
    let skills = [];

    function addSkill() {
      const skillInput = document.getElementById('skillInput');
      const skill = skillInput.value.trim();
      
      if (skill && !skills.includes(skill)) {
        skills.push(skill);
        updateSkillsList();
        skillInput.value = '';
      }
    }

    function removeSkill(skill) {
      skills = skills.filter(s => s !== skill);
      updateSkillsList();
    }

    function updateSkillsList() {
      const skillsList = document.getElementById('skillsList');
      skillsList.innerHTML = skills.map(skill => `
        <div class="skill-tag">
          ${skill}
          <button type="button" class="remove-skill" onclick="removeSkill('${skill}')">×</button>
        </div>
      `).join('');
    }

    // Add skill on Enter key
    document.getElementById('skillInput').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        addSkill();
      }
    });

    // Password validation
    function validatePasswords() {
      const password = document.getElementById('password').value;
      const confirmPassword = document.getElementById('confirmPassword').value;
      
      if (password !== confirmPassword) {
        document.getElementById('confirmPassword').setCustomValidity('Passwords do not match');
      } else {
        document.getElementById('confirmPassword').setCustomValidity('');
      }
    }

    document.getElementById('password').addEventListener('input', validatePasswords);
    document.getElementById('confirmPassword').addEventListener('input', validatePasswords);

    // Form submission
    document.getElementById('signupForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      // Validate passwords match
      const password = document.getElementById('password').value;
      const confirmPassword = document.getElementById('confirmPassword').value;
      
      if (password !== confirmPassword) {
        alert('Passwords do not match!');
        return;
      }

      // Check terms agreement
      if (!document.getElementById('terms').checked) {
        alert('Please agree to the Terms of Service and Privacy Policy');
        return;
      }

      // Collect form data
      const formData = {
        firstName: document.getElementById('firstName').value,
        lastName: document.getElementById('lastName').value,
        email: document.getElementById('email').value,
        username: document.getElementById('username').value,
        password: password,
        role: document.getElementById('role').value,
        skills: skills,
        experience: document.getElementById('experience').value,
        interests: document.getElementById('interests').value,
        bio: document.getElementById('bio').value,
        newsletter: document.getElementById('newsletter').checked,
        terms: document.getElementById('terms').checked
      };

      // Simulate account creation
      const submitBtn = document.getElementById('submitBtn');
      const originalText = submitBtn.textContent;
      
      submitBtn.textContent = 'Creating Account...';
      submitBtn.disabled = true;
      
      setTimeout(() => {
        submitBtn.textContent = 'Account Created! 🎉';
        setTimeout(() => {
          alert(`Welcome to CREW, ${formData.firstName}! Please check your email to verify your account.`);
          // Redirect to dashboard or login
          window.location.href = '/index.html';
        }, 2000);
      }, 2000);
    });

    // Social sign up functions
    function signUpWith(provider) {
      if (provider === 'phantom') {
        // Check if Phantom wallet is installed
        if (typeof window.solana !== 'undefined' && window.solana.isPhantom) {
          alert('Connecting to Phantom wallet... You\'ll be prompted to create a username after wallet connection.');
          // In real implementation, this would connect to Phantom
          setTimeout(() => {
            const username = prompt('Choose a username for your CREW account:');
            if (username) {
              alert(`Welcome to CREW! Your account "${username}" has been created and linked to your Phantom wallet.`);
              window.location.href = '/index.html';
            }
          }, 1000);
        } else {
          alert('Phantom wallet not detected. Please install Phantom wallet extension first.');
          window.open('https://phantom.app/', '_blank');
        }
      } else if (provider === 'x') {
        alert('Redirecting to X authentication... This will create your account automatically.');
        setTimeout(() => {
          window.location.href = '/index.html';
        }, 1000);
      }
    }

    // Username availability check with crypto-secure randomness
    document.getElementById('username').addEventListener('blur', function() {
      const username = this.value.trim();
      if (username.length >= 3) {
        // Simulate API call with crypto-secure random generation
        setTimeout(() => {
          // Use crypto-secure random generation instead of Math.random()
          const crypto = window.crypto || window.msCrypto;
          const array = new Uint32Array(1);
          crypto.getRandomValues(array);
          const secureRandom = array[0] / (0xffffffff + 1); // Convert to 0-1 range
          
          if (secureRandom > 0.7) {
            this.style.borderColor = '#f00';
            this.setCustomValidity('Username is already taken');
          } else {
            this.style.borderColor = '#0f0';
            this.setCustomValidity('');
          }
        }, 500);
      }
    });

    // Email validation
    document.getElementById('email').addEventListener('blur', function() {
      const email = this.value.trim();
      if (email && !email.includes('@')) {
        this.style.borderColor = '#f00';
        this.setCustomValidity('Please enter a valid email address');
      } else {
        this.style.borderColor = '';
        this.setCustomValidity('');
      }
    });

    async function fetchUnreadMessages() {
      try {
        const response = await fetch('/api/messages/unread');
        const { count } = await response.json();
        document.getElementById('notification-count').textContent = count;
      } catch (error) {
        console.error('Error fetching unread messages:', error);
      }
    }
    
    fetchUnreadMessages();
  </script>
  <!-- Add this line before your existing scripts -->
  <script src="shared-functions.js"></script>
  
  <!-- Your existing page-specific scripts -->
  <script>
    // Your existing JavaScript code
  </script>

    <!-- Add shared functions -->
    <script src="shared-functions.js"></script>
    
    <!-- Page-specific scripts -->
    <script>
        // ...existing JavaScript code...
    </script>
</body>
</html>



